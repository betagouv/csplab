{% comment %}
Composant Carte d'opportunité CSPLab
Basé sur fr-card du DSFR avec personnalisations

Variables attendues :
- opportunite.title: Titre du poste/concours
- opportunite.location: Localisation (ex: "Paris")
- opportunite.public_service_branch: Versant (ex: "Fonction publique d'État")
- opportunite.category: Catégorie (ex: "A", "B", "C")
- opportunite.recruitment_level: Niveau de recrutement (optionnel)
- opportunite.type: Type ("emploi" ou "concours")
- opportunite.type_label: Label du type (ex: "Concours interne")
- opportunite.intitule_poste: Métier associé (optionnel)
- opportunite.detail_url: URL vers le détail
{% endcomment %}
{% load dsfr_tags %}
<div class="fr-card fr-enlarge-link csplab-opportunite-card">
    <div class="fr-card__body">
        <div class="fr-card__content">
            {# Titre #}
            <h3 class="fr-card__title">
                <a href="{{ opportunite.detail_url|default:'#' }}" class="fr-card__link">
                    {{ opportunite.title }}
                </a>
            </h3>

            {# Métadonnées (détails) #}
            <div class="fr-card__end">
                <ul class="csplab-opportunite-card__details">
                    {# Type (concours/emploi) #}
                    {% if opportunite.type_label %}
                    <li class="csplab-opportunite-card__detail">
                        <span class="fr-icon-edit-line fr-icon--sm" aria-hidden="true"></span>
                        <span>{{ opportunite.type_label }}</span>
                    </li>
                    {% endif %}

                    {# Localisation #}
                    {% if opportunite.location_display %}
                    <li class="csplab-opportunite-card__detail">
                        <span class="fr-icon-map-pin-2-line fr-icon--sm" aria-hidden="true"></span>
                        <span>{{ opportunite.location_display }}</span>
                    </li>
                    {% endif %}

                    {# Versant fonction publique #}
                    {% if opportunite.public_service_branch %}
                    <li class="csplab-opportunite-card__detail">
                        <span class="fr-icon-building-line fr-icon--sm" aria-hidden="true"></span>
                        <span>{{ opportunite.public_service_branch }}</span>
                    </li>
                    {% endif %}

                    {# Catégorie + Niveau de recrutement #}
                    {% if opportunite.category %}
                    <li class="csplab-opportunite-card__detail">
                        <span class="fr-icon-user-setting-line fr-icon--sm" aria-hidden="true"></span>
                        <span>Catégorie {{ opportunite.category }}</span>
                        {% if opportunite.recruitment_level %}
                        <span class="csplab-opportunite-card__detail-hint">{{ opportunite.recruitment_level }}</span>
                        {% endif %}
                    </li>
                    {% endif %}
                </ul>

            {# Bloc métier (optionnel) #}
            {% if opportunite.intitule_poste %}
                <div class="csplab-opportunite-card__intitule-poste">
                    <span class="fr-icon-briefcase-line fr-icon--sm" aria-hidden="true"></span>
                    <div class="csplab-opportunite-card__intitule-poste-content">
                        <span class="csplab-opportunite-card__intitule-poste-label">MÉTIER</span>
                        <span class="csplab-opportunite-card__intitule-poste-title">{{ opportunite.intitule_poste }}</span>
                    </div>
                </div>
                {% endif %}
              </div>
        </div>
    </div>

    {# Bouton "En savoir plus" #}
    {% comment %} <div class="fr-card__footer">
        <ul class="fr-btns-group fr-btns-group--inline-reverse fr-btns-group--inline-lg">
            <li>
                {% dsfr_button label="En savoir plus" extra_classes="fr-btn--tertiary fr-btn--icon-right" onclick="window.location.href='"|add:opportunite.detail_url|default:"#"|add:"'" %}
            </li>
        </ul>
    </div> {% endcomment %}
</div>
